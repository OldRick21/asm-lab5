# Algorithm Details

## Общее описание
Программа вычисляет значение функции `sqrt(x + 1)` двумя способами: 
1. **Левая часть**: через встроенную функцию `sqrt`.
2. **Правая часть**: через разложение в ряд Тейлора. 

Результаты итераций ряда записываются в файл, а итоговые значения выводятся на экран. Условие остановки вычислений — достижение заданной точности `ε`.

---

## Шаги алгоритма

### 1. Открытие файла
- **Цель**: Создать/перезаписать файл для записи промежуточных результатов.
- **Действия**:
  - Проверка количества аргументов командной строки (`argc >= 2`).
  - Открытие файла с именем `argv[1]` в режиме записи (`"w"`).
  - Обработка ошибок: 
    - Если аргументов недостаточно → код ошибки `2`.
    - Если файл не открывается → код ошибки `3`.

### 2. Ввод данных
- **Цель**: Получить входные данные `x` и `ε`.
- **Действия**:
  - Ввод `x` через `scanf` с форматом `%lf`.
  - Проверка условия `|x| <= 1` (необходимо для сходимости ряда).
    - Если `|x| > 1` → код ошибки `1`.
  - Ввод точности `ε` через `scanf`.

### 3. Вычисление левой части
- **Формула**: `left_part = sqrt(x + 1)`.
- **Действия**:
  - Вычисление `x + 1`.
  - Вызов функции `sqrt` из математической библиотеки.

### 4. Инициализация ряда
- **Начальные условия**:
  - `a_0 = 1.0` (первый член ряда).
  - `sum = a_0` (начальная сумма).
  - `n = 0` (счетчик итераций).

### 5. Итеративное вычисление ряда
- **Цель**: Найти сумму ряда до достижения условия `|a_n - a_{n-1}| < ε`.
- **Формула для следующего члена**:
  ```math
  a_{n+1} = a_n \cdot \frac{-(2n - 1)}{2(n + 1)} \cdot x
  ```
- **Действия на каждой итерации**:
  1. Сохранить предыдущий член: `previous = current`.
  2. Вычислить новый член ряда `a_{n+1}`:
     - Преобразовать `n` в `double`.
     - Рассчитать числитель: `-(2n - 1)`.
     - Рассчитать знаменатель: `2(n + 1)`.
     - Обновить `current = current * (числитель / знаменатель) * x`.
  3. Записать в файл: `n` и `current` через `fprintf`.
  4. Проверить условие останова: 
     - Если `|current - previous| < ε` → выход из цикла.
  5. Обновить сумму: `sum += current`.
  6. Инкрементировать счетчик: `n += 1`.

### 6. Вывод результатов
- **Действия**:
  - Закрыть файл через `fclose`.
  - Вывести на экран:
    - `left_part` (результат через `sqrt`).
    - `sum` (сумма ряда).

---

## Обработка ошибок
| Код ошибки | Причина                          |
|------------|----------------------------------|
| `1`        | Некорректный ввод (`|x| > 1`).  |
| `2`        | Недостаточно аргументов.         |
| `3`        | Ошибка открытия файла.           |

---

## Ключевые переменные
| Переменная     | Тип    | Описание                          |
|----------------|--------|-----------------------------------|
| `double_val`   | `double` | Введенное значение `x`.          |
| `eps`          | `double` | Точность `ε`.                    |
| `current`      | `double` | Текущий член ряда (`a_n`).       |
| `previous`     | `double` | Предыдущий член ряда (`a_{n-1}`).|
| `sum`          | `double` | Накопленная сумма ряда.          |
| `n`            | `int`    | Счетчик итераций.                |
| `left_part`    | `double` | Результат левой части (`sqrt`).  |
| `file_handle`  | `FILE*`  | Указатель на файл для записи.    |

---

## Математическая основа
Ряд Тейлора для `sqrt(1 + x)` при `|x| <= 1`:
```math
\sqrt{1 + x} = 1 + \sum_{n=1}^{\infty} \frac{(-1)^{n+1} (2n-2)!}{2^{2n-1} (n-1)! n!} x^n
```
В коде используется упрощенная рекуррентная формула для вычисления членов ряда.
